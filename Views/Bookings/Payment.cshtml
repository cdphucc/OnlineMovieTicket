@model OnlineMovieTicket.Models.Booking
@{
    ViewBag.Title = "Thanh toán";
    var firstDetail = Model.BookingDetails?.FirstOrDefault();
    var showTime = firstDetail?.ShowTime;
    var movie = showTime?.Movie;
}
<h2>Thanh toán vé xem phim</h2>
<p>Mã đặt vé: <b>@Model.Id</b></p>
<p>Phim: <b>@(movie?.Title ?? "N/A")</b></p>
<p>Suất chiếu: <b>@(showTime?.StartTime.ToString("dd/MM/yyyy HH:mm") ?? "N/A")</b></p>
<p>
    Ghế:
    @if (Model.BookingDetails != null)
    {
        foreach (var detail in Model.BookingDetails)
        {
            <span>@(detail.Seat?.SeatNumber ?? "N/A") </span>
        }
    }
    else
    {
        <span>N/A</span>
    }
</p>
<p>Tổng tiền: <b>@Model.TotalAmount.ToString("n0") VNĐ</b></p>

<form asp-action="ConfirmPayment" method="post">
    @Html.AntiForgeryToken()
    <input type="hidden" name="bookingId" value="@Model.Id" />
    <button type="submit" class="btn btn-success">Xác nhận thanh toán</button>
</form>
